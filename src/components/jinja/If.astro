---
interface Props {
  condition: string;
}
const { condition } = Astro.props;

export const email = import.meta.env.DEV ? "fake@example.com" : "{{ email }}";

const loggedin = true;
const autotopup = false;
const plan = "payg" as string;
const usable_requests = 100;
const devContext: Record<string, boolean> = {
  loggedin: loggedin,
  "not loggedin": !loggedin,
  "plan == 'hobby'": plan == "hobby",
  "plan == 'pro'": plan == "pro",
  "plan != 'hobby'": plan != "hobby",
  "plan != 'pro'": plan != "pro",
  email: Boolean(email),
  "not email": !email,
  top_up: autotopup,
  "not top_up": !autotopup,
  "usable_requests != None": usable_requests != null,
  "usable_requests == None": usable_requests == null,
};
---

{
  import.meta.env.DEV ? (
    devContext[condition] ? (
      <slot />
    ) : null
  ) : (
    <>
      <Fragment set:html={`{% if ${condition} %}`} />
      <slot />
      <Fragment set:html="{% endif %}" />
    </>
  )
}
